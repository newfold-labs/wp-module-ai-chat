@use "mixins";

.nfd-ai-chat-messages {
	display: flex;
	flex: 1 1 auto;
	flex-direction: column;
	overflow-y: auto;
	padding: 20px 24px;
	gap: 16px;
	min-height: 0;

	@include mixins.custom-scrollbar;
}

.nfd-ai-chat-message {
	display: flex;
	gap: 12px;
	align-items: flex-start;
	font-size: var(--nfd-ai-chat-font-size-base);

	.nfd-ai-chat-message__content {
		> * {
			margin-bottom: 1rem;
		}

		h1, h2, h3, h4, h5, h6 {
			line-height: 1.2;
			font-weight: 600;
			margin-top: 1.5rem;
			margin-bottom: 0.75rem;
			color: var(--nfd-ai-chat-color-text);
		}

		h1 { font-size: var(--nfd-ai-chat-font-size-xl); margin-top: 0; }
		h2 { font-size: var(--nfd-ai-chat-font-size-lg); }
		h3 { font-size: var(--nfd-ai-chat-font-size-md); text-transform: initial; }
		h4 { font-size: var(--nfd-ai-chat-font-size-md); }
		h5 { font-size: var(--nfd-ai-chat-font-size-sm); }
		h6 { font-size: var(--nfd-ai-chat-font-size-sm); font-weight: 500; }

		p {
			font-size: var(--nfd-ai-chat-font-size-base);
			line-height: 1.6;
			margin-bottom: 1rem;
		}

		strong { font-weight: 600; }
		em { font-style: italic; }
		u { text-decoration: underline; }
		s { text-decoration: line-through; }

		mark {
			background-color: var(--nfd-ai-chat-color-primary-light-20);
			padding: 0.1em 0.2em;
			border-radius: 2px;
		}

		small { font-size: 0.875em; }

		a {
			color: var(--nfd-ai-chat-color-primary);
			text-decoration: none;
			&:hover { text-decoration: underline; }
		}

		code {
			background-color: var(--nfd-ai-chat-color-border);
			padding: 0.2em 0.4em;
			border-radius: 3px;
			font-family: "Courier New", Courier, monospace;
			font-size: 0.9em;
		}

		code.inline-code {
			background-color: rgba(0, 0, 0, 0.06);
			color: var(--nfd-ai-chat-color-text);
			font-weight: 500;
		}

		ul, ol {
			margin: 1rem 0;
			padding-left: 1.5rem;
		}

		ul { list-style-type: disc; }
		ol { list-style-type: decimal; }

		li {
			margin-bottom: 0.5rem;
			line-height: 1.5;
		}

		blockquote {
			margin: 1.5rem 0;
			padding: 1rem 1.5rem;
			background-color: var(--nfd-ai-chat-color-background);
			border-left: 4px solid var(--nfd-ai-chat-color-primary);
			font-style: italic;
			line-height: 1.6;
		}

		pre {
			background-color: var(--nfd-ai-chat-color-background);
			padding: 1rem;
			border-radius: 4px;
			overflow-x: auto;
			margin: 1rem 0;
			font-family: "Courier New", Courier, monospace;
			font-size: 0.9em;
			line-height: 1.4;
		}

		pre code {
			background: none;
			padding: 0;
			border-radius: 0;
		}

		hr {
			border: none;
			border-top: 1px solid var(--nfd-ai-chat-color-grey-light);
			margin: 2rem 0;
		}
	}

	&--assistant {
		flex-direction: column;
		justify-content: flex-start;

		.nfd-ai-chat-message__content {
			flex: 1;
			width: 100%;
			line-height: 1.6;
			color: var(--nfd-ai-chat-color-text);
			background: none;
			padding: 4px 0 0 0;
			border-radius: 0;
			white-space: pre-wrap;

			&--rich {
				white-space: normal;
				> *:first-child { margin-top: 0; }
				> *:last-child { margin-bottom: 0; }
			}
		}
	}

	&--user {
		justify-content: flex-end;

		.nfd-ai-chat-message__content {
			background: var(--nfd-ai-chat-color-background);
			padding: 8px 16px;
			border-radius: 12px;
			line-height: 1.5;
			color: var(--nfd-ai-chat-color-text-secondary);
			max-width: 70%;
			white-space: pre-wrap;
			position: relative;
			overflow-wrap: break-word;
		}
	}
}
